<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Orchid Insights</title>
    {% include 'includes/styles' with { "page": view } %}
    {% block styles %}{% endblock %}

    <style>
        body {
            background-color: #eff0f4;
            min-height: 100vh;
        }
    </style>
</head>
<body>

<div id="orchid-app">
    <!-- Primary Navbar -->
    <div uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky">
        <nav class="uk-navbar-container" uk-navbar="mode: click; align: right">
            <div class="uk-navbar-left">
                <a class="uk-navbar-toggle" href="#" uk-toggle="target: #uk-sidenav-left">
                    <span uk-navbar-toggle-icon></span> <span class="uk-margin-small-left">Menu</span>
                </a>
                <ul class="uk-navbar-nav">
                    <li>
                        <a href="{{ site.baseUrl }}/admin">Admin</a>
                    </li>
                    <li>
                        <a href="#">Get Help</a>
                        <div class="uk-navbar-dropdown">
                            <ul class="uk-nav uk-navbar-dropdown-nav">
                                <li class="uk-nav-header">Get Help</li>
                                <li><a target="_blank" href="https://orchid.netlify.com">Documentation</a></li>
                                <li><a target="_blank" href="https://gitter.im/JavaEden/Orchid">Community Chat</a></li>
                                <li><a target="_blank" href="https://github.com/JavaEden/Orchid">View on GitHub</a></li>
                                <li><a target="_blank" href="https://github.com/JavaEden/Orchid/issues">Report Issue</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
                <build-progress></build-progress>
            </div>

            <div class="uk-navbar-right">
                <ul class="uk-navbar-nav">
                    <li>
                        <a href="#">
                            <span class="uk-icon uk-margin-small-right" uk-icon="icon: code"></span>
                            Manage
                        </a>

                        <div class="uk-navbar-dropdown uk-navbar-dropdown-width-3">
                            <div class="uk-navbar-dropdown-grid uk-text-center uk-grid-small" uk-grid>
                                <div class="uk-width-1-1">
                                    <h2>{{ site.about.siteName }}</h2>
                                    <p>{{ site.about.siteDescription }}</p>
                                    <div class="uk-grid-divider uk-grid-small" uk-grid>
                                        <div class="uk-width-1-1 uk-width-1-3@m">Orchid {{ site.orchidVersion }}</div>
                                        <div class="uk-width-1-1 uk-width-1-3@m">{{ site.version }}</div>
                                        <div class="uk-width-1-1 uk-width-1-3@m">{{ site.environment | title }}
                                            Environment
                                        </div>
                                    </div>
                                </div>
                                <div class="uk-width-1-1">
                                    <enter-command></enter-command>
                                </div>
                                <div class="uk-width-1-1">
                                    <div class="uk-child-width-1-2 uk-text-center uk-grid-small" uk-grid>
                                        <div>
                                            <button
                                                    class="uk-button uk-button-primary uk-width-1-1"
                                                    v-on:click="$bus.$emit('submitCommand', 'build')">
                                                Rebuild
                                            </button>
                                        </div>
                                        <div>
                                            <a href="{{ site.baseUrl }}" target="_blank">
                                                <button class="uk-button uk-button-default uk-width-1-1">View Site
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="uk-width-1-1 uk-text-left">

                                    <div uk-grid>
                                        <div class="uk-width-auto@m">
                                            <ul class="uk-tab-left"
                                                uk-tab="connect: #component-tab-left; animation: uk-animation-fade">
                                                <li><a href="#">Tasks</a></li>
                                                <li><a href="#">Commands</a></li>
                                                <li><a href="#">Event Log</a></li>
                                            </ul>
                                        </div>
                                        <div class="uk-width-expand@m">
                                            <div class="uk-panel uk-panel-scrollable uk-height-medium"
                                                 style="border-left: none; border-right: none;">
                                                <ul id="component-tab-left" class="uk-switcher">
                                                    <li>
                                                        <ul class="uk-list uk-list-divider">
                                                        {% for task in view.tasks %}
                                                            <li class="uk-link-text">
                                                                <a href="{{ view.getDescriptionLink(task.class) }}">
                                                                    <b>{{ task.name }}</b>
                                                                </a>
                                                                {% if task.description is not empty %}
                                                                    -
                                                                    <span>{{ task.description }}</span>
                                                                {% endif %}
                                                            </li>
                                                        {% endfor %}
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <ul class="uk-list uk-list-divider">
                                                        {% for command in view.commands %}
                                                            <li class="uk-link-text">
                                                                <a href="{{ view.getDescriptionLink(command.class) }}">
                                                                    <b>{{ command.key }}</b>
                                                                </a>
                                                                {% if command.description is not empty %}
                                                                    -
                                                                    <span>{{ command.description }}</span>
                                                                {% endif %}
                                                            </li>
                                                        {% endfor %}
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <event-list max-message-count="50"></event-list>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
    </div>

    <!-- Left Sidenav Content -->
    <div class="uk-offcanvas-content">
    {% block allContent %}
        <div class="uk-flex-center uk-grid-large" uk-grid>
            <div class="uk-width-2-3@m uk-width-1-2@xl">
                <div class="uk-padding uk-padding-remove-horizontal">
                    <div class="uk-card uk-card-default uk-box-shadow-large">
                        <div class="uk-card-body">
                            <h3 class="uk-card-title">{{ view.title }}</h3>
                            <div>
                                <event-list max-message-count="3"></event-list>
                            </div>

                            {% block mainContent %}
                                <img src="/assets/img/orchid.png" alt="Orchid Logo">
                            {% endblock %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endblock %}

        <a href="#uk-sidenav-left" uk-toggle></a>
        <div id="uk-sidenav-left" uk-offcanvas>
            <div class="uk-offcanvas-bar">
                <button class="uk-offcanvas-close" type="button" uk-close></button>

                <ul class="uk-nav-default uk-nav-parent-icon" uk-nav>
                    <li class="uk-active"><a href="#">Active</a></li>
                    <li class="uk-parent">
                        <event-list max-message-count="25"></event-list>
                    </li>
                    {% for adminList in view.importantAdminLists %}
                        <li class="nav-item nav-dropdown">
                            <a class="nav-link nav-dropdown-toggle" href="#">
                                <i class="icon-organization"></i>
                                <b>{{ adminList.key | capitalize }}</b>
                            </a>
                            <ul class="nav-dropdown-items">
                            {# @pebvariable name="view" type="com.eden.orchid.api.server.OrchidView" #}
                            {% for item in adminList.getItems() %}
                            {# @pebvariable name="generator" type="com.eden.orchid.api.generators.OrchidGenerator" #}
                                <li class="nav-item">
                                    <a class="nav-link pl-4" href="{{ view.getDescriptionLink(item.class) }}">
                                        <i class="icon-organization"></i>
                                        <span>{{ item.class.simpleName | capitalize }}</span>
                                    </a>
                                </li>
                            {% endfor %}
                            </ul>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>

<script>window.websocketUrl = 'ws://localhost:{{ websocketPort }}';</script>
{% include 'includes/scripts' with { "page": view } %}
{% block scripts %}{% endblock %}
</body>
</html>



